<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions">

<h:head>
	<meta http-equiv="cache-control" content="no-cache" />
	<meta http-equiv="expires" content="0" />
	<meta http-equiv="pragma" content="no-cache" />

	<script src="http://maps.google.com/maps/api/js?sensor=false"
		type="text/javascript"></script>
	<h:outputStylesheet library="css" name="icon.css" />
</h:head>
<h:body style="height: 100%">
	<p:ajaxStatus onstart="PF('statusDialog').show()"
		onsuccess="PF('statusDialog').hide()" />

	<p:dialog widgetVar="statusDialog" modal="true" draggable="false"
		closable="false" resizable="false" showHeader="false"
		appendTo="@(body)" style="z-index: -1000000000">
		<h:panelGrid columns="2"
			columnClasses="ui-dialog-message-image, ui-dialog-message-text">
			<p:graphicImage library="images" name="loading.gif" width="100"
				height="100" />
			<h:outputText value="#{coreMsg.loadingPage}" />
		</h:panelGrid>
	</p:dialog>

	<p:layout fullPage="true" stateful="false">
		<p:layoutUnit id="filterLayout" header="#{msg.options}"
			resizable="true" position="north" collapsible="true" collapsed="true"
			maxSize="300">
			<ui:insert name="filterContent" />
		</p:layoutUnit>

		<p:layoutUnit id="centerLayout" header="#{msg.performances}"
			position="center">
			<ui:insert name="centerContent" />
		</p:layoutUnit>
	</p:layout>

	<h:panelGroup id="dialogGroup" layout="block">
		<ui:insert name="dialogContent" />
	</h:panelGroup>

	<h:panelGroup id="messageGroup" layout="block">
		<p:growl id="globalErrorMessageRowl" autoUpdate="true"
			globalOnly="true" showSummary="true" sticky="true" severity="error" />
		<p:growl id="globalInfoMessageRowl" autoUpdate="true"
			globalOnly="true" showSummary="true" life="2000" severity="info" />
	</h:panelGroup>

	<h:form id="menuStackForm" prependId="true">
		<p:stack id="menuStack" icon="/resources/images/open_box_60_60.png"
			expanded="true">
			<p:menuitem value="#{msg.login}" rendered="#{not utxModel.logged}"
				icon="/resources/images/lock_40_40.png"
				url="#" global="true" update="@form, :messageGroup" />
			<p:menuitem value="#{msg.logout}" rendered="#{utxModel.logged}"
				icon="/resources/images/lock_40_40.png"
				actionListener="#{loginBean.logout()}" global="true" update="@form" />
		</p:stack>
	</h:form>
</h:body>
</html>
